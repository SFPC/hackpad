<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-us" />
<meta name="version" content="13"/>
<style>body {font-family:Helvetica}ul.comment{list-style-image:url('https://hackpad.com/static/img/comment.png');} ul.task{list-style-image:url('https://hackpad.com/static/img/unchecked.png');}ul.taskdone{list-style-image:url('https://hackpad.com/static/img/checked.png');} </style><title>/3668$yRDnR3LLLsl</title>
</head>
<body><h1>Ramsey class: grammar 2</h1><p></p><p>&lt;meta charset=&quot;utf-8&quot;&gt;</p><p></p><p>&lt;script src=&quot;js/jquery.js&quot;&gt;&lt;/script&gt;</p><p>&lt;script src=&quot;js/jqconsole.js&quot;&gt;&lt;/script&gt;</p><p>&lt;script src=&quot;js/sugar.js&quot;&gt;&lt;/script&gt;</p><p>&lt;script src=&quot;js/peg.js&quot;&gt;&lt;/script&gt;</p><p>&lt;script src=&quot;js/plt.js&quot;&gt;&lt;/script&gt;</p><p></p><p>&lt;script type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</p><p></p><p>&lt;title&gt;Conditionals&lt;/title&gt;</p><p></p><p>&lt;!--</p><p></p><p>Full documentation: <a href="http://pegjs.majda.cz/documentation#grammar-syntax-and-semantics-parsing-expression-types"></a>http://pegjs.majda.cz/documentation#grammar-syntax-and-semantics-parsing-expression-types</p><p></p><p>&rsquo;x&rsquo;&nbsp;&nbsp; : match the literal character &rsquo;x&rsquo;</p><p>[xyz] : match one of the literal character &rsquo;x&rsquo;, &rsquo;y&rsquo;, or &rsquo;z&rsquo;</p><p>x+&nbsp;&nbsp;&nbsp; : match x 1 or more times</p><p>x*&nbsp;&nbsp;&nbsp; : match x 0 or more times</p><p>x?&nbsp;&nbsp;&nbsp; : match x 0 or 1 times</p><p>!x&nbsp;&nbsp;&nbsp; : match anything but the match x</p><p>x/y&nbsp;&nbsp; : match x or y, trying in that order</p><p>v:x&nbsp;&nbsp; : assign the result of the match x to the variable v</p><p></p><p>--&gt;</p><p></p><p>&lt;grammar&gt;</p><p>&nbsp; start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = operation</p><p></p><p>&nbsp; operation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = &rsquo;(&rsquo; space op:operator space args:expression+ &rsquo;)&rsquo; space { return eval(args.join(op)) }</p><p>&nbsp; operator&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = &rsquo;+&rsquo; / &rsquo;-&rsquo; / &rsquo;/&rsquo; / &rsquo;*&rsquo;</p><p></p><p>&nbsp; expression&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = operation / number</p><p></p><p>&nbsp; number&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = d:digit+ space { return parseInt( d.join(&rsquo;&rsquo;) ) }</p><p>&nbsp; digit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = [0123456789]</p><p></p><p>&nbsp; space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = [ ]* / !. { return undefined }</p><p>&nbsp; mandatory_space&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = [ ]+ / !. { return undefined }</p><p>&lt;/grammar&gt;</p><p></p><p></p><p>&lt;h3&gt;Operators&lt;/h3&gt;</p><p>&lt;p&gt;&lt;em&gt;Make these operators parse correctly&lt;/em&gt;&lt;/p&gt;</p><p>&lt;code&gt;(+ 7 13)&lt;/code&gt;</p><p>&lt;code&gt;(+ 7 (+ 30 5))&lt;/code&gt;</p><p>&lt;code&gt;(- 100 (+ 29 29))&lt;/code&gt;</p><p>&lt;code&gt;(* (- 10 5) (+ 20 20 30 40 50))&lt;/code&gt;</p><p></p><p>&lt;h3&gt;Comparisons&lt;/h3&gt;</p><p>&lt;p&gt;&lt;em&gt;These should evaluate to true&lt;/em&gt;&lt;/p&gt;</p><p>&lt;code&gt;(&lt; 18 90)&lt;/code&gt;</p><p>&lt;code&gt;(&gt; 78 12)&lt;/code&gt;</p><p>&lt;code&gt;(= 50 50)&lt;/code&gt;</p><p></p><p>&lt;p&gt;&lt;em&gt;These should evaluate to false&lt;/em&gt;&lt;/p&gt;</p><p>&lt;code&gt;(&lt; 5 4)&lt;/code&gt;</p><p>&lt;code&gt;(&gt; 100 200)&lt;/code&gt;</p><p>&lt;code&gt;(= 50 51)&lt;/code&gt;</p><p></p><p>&lt;h3&gt;Conditionals&lt;/h3&gt;</p><p>&lt;p&gt;&lt;em&gt;This should evaluate to 5&lt;/em&gt;&lt;/p&gt;</p><p>&lt;code&gt;(if (&lt; 0 8) 5 9)&lt;/code&gt;</p><p></p><p>&lt;p&gt;&lt;em&gt;This should evaluate to 9&lt;/em&gt;&lt;/p&gt;</p><p>&lt;code&gt;(if (&gt; 0 8) 5 9)&lt;/code&gt;</p><p></p><p>&lt;h3&gt;Extra: Support nesting&lt;/h3&gt;</p><p>&lt;code&gt;(if (&gt; 0 8) (+ 5 8) (- 9 8))&lt;/code&gt;</p><p>&lt;code&gt;(if (&gt; (+ 90 12) (+ 80 15)) (+ 5 8) (- 9 8))&lt;/code&gt;</p><p></p><p>&lt;h3&gt;Extra: Support formatting&lt;/h3&gt;</p><p>&lt;code&gt;</p><p>(if (&gt; (+ 90 12) (+ 80 15))</p><p>&nbsp; (+ 5 8)</p><p>&nbsp; (- 9 8))&lt;/code&gt;</p><p></p><p>&lt;code&gt;</p><p>(if&nbsp;</p><p>&nbsp; (&gt;</p><p>&nbsp;&nbsp;&nbsp; (+ 90 12)</p><p>&nbsp;&nbsp;&nbsp; (+ 80 15))</p><p>&nbsp; (+ 5 8)</p><p>&nbsp; (- 9 8))&lt;/code&gt;</p><p></p><p></p></body>
</html>
