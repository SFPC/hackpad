<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Language" content="en-us" />
<meta name="version" content="3563"/>
<style>body {font-family:Helvetica}ul.comment{list-style-image:url('https://hackpad.com/static/img/comment.png');} ul.task{list-style-image:url('https://hackpad.com/static/img/unchecked.png');}ul.taskdone{list-style-image:url('https://hackpad.com/static/img/checked.png');} </style><title>/3668$CDSeOdRNfo8</title>
</head>
<body><h1>Mesh Networks</h1><p>Happy Hour Mesh Networking with <a href='http://www.boxysean.com/'/>Sean McIntyre</a></p><p><img src='http://0adb8101b7ae4114a392-dfaacb9b5d3eae26a1de1132d02b2b65.r33.cf3.rackcdn.com/hand-catching-faq-10079690.jpg'/></p><p>Evernote sucks, Notational Velocity is rad.&nbsp;</p><p></p><p>The router is awesome. We have lots of Rasbberry Pis and Arduinos. What about the router!?!</p><p></p><p>-----</p><p>Side quiz:</p><p>What is Gentoo? Flavor of Linux - <a href="https://en.wikipedia.org/wiki/Gentoo_Linux"></a>https://en.wikipedia.org/wiki/Gentoo_Linux</p><p></p><p>What flavor of Linux is OSX built on? FreeBSD</p><p>---</p><p></p><p>What does flavor of linux mean?</p><p></p><p><b>THE INTERNET</b></p><p></p><p>Flavors of linux:</p><p></p><p>OSX -&gt; FreeBSD (osx is based on freebsd)</p><p>Debian - lots of people develop this, most bad ass of the linux&nbsp;</p><p>Ubuntu -&gt; Debian, made by canonical, trying to make it more user friendly</p><p>Raspian</p><p></p><p></p><p>Hardware:</p><p>D-Link</p><p>Buffalo</p><p>Netgear</p><p>Cisco -&gt; LinkSys</p><p>60 - 100 mhz (level of fast arduinos!)</p><p></p><p>Is it weird to put Arduino and Raspberry here (under hardware) on the list? Why? No multithreading. That&rsquo;s why it feels different.&nbsp;</p><p></p><p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_CDSeOdRNfo8_p.150416_1398822958607_20140429_212830.jpg'/></p><p></p><p>Are routers computers? (@lee thinks they are micro- controllers, not computers) <a href='/ep/profile/m8dzCUlHBtY'/>lee t</a> is correct!</p><p>How fast is your processor on your computer? 2.4 ghz</p><p>Arduino? 16 mhz</p><p>RaspPi - 500 mhz</p><p>Phone - 700 mhz</p><p>Which is bigger? Mac! 2.4 billion cycles a second.</p><p></p><p></p><p>hz = 1 cycle per second</p><p>60 hz = 60 cycles per second</p><ul class="comment"><li>(drunk math... plz help!)</li></ul>

<p>Routers are somewhere between an arduino and a raspberry pi with a radio.</p><p></p><p>(<a href='https://hackaday.com'/>hackaday.com</a> plug - who&rsquo;s going to <a href='https://hackaday.io/page/276'/>space</a>?)</p><p>If you read hack a day for a year, you&rsquo;ll come up with 10 router hacks. they are undocumented arduinos. They are all running propriety ar operating systems. Name another proprietary operating system: windows! when was windows made? early 80s. when were routers made? early 2000s. They have linux on them! all of them!</p><p></p><p><img src='http://i1-news.softpedia-static.com/images/news2/Linux-Outdoor-WiFi-Router-2.png?1341580794'/></p><p></p><p>What can you do on a router? run Python, run C. There&rsquo;s just not a lot of memory (more than an arduino, less than a raspberry pi)</p><p></p><p>POINT BEING: Routers are a completely hackable platform, and people are hacking them all the time.</p><p></p><p><img src='http://koti.mbnet.fi/~keiky/misc/linux/router/imgs/ethernet_lan.png'/></p><p></p><p>Sean&rsquo;s favorite OS: <a href='https://openwrt.org/'/>OpenWRT</a> - OpenWrt is an operating system / embedded operating system based on the Linux kernel, made to work with radio, and primarily used on embedded devices to route network traffic.</p><p></p><p></p><p>VisiBox -&nbsp;</p><p></p><p><a href='https://en.wikipedia.org/wiki/Embedded_system'/>Embedded Device</a>: An <b>embedded system</b> is a <a href='https://en.wikipedia.org/wiki/Computer'/>computer</a> <a href='https://en.wikipedia.org/wiki/System'/>system</a> with a dedicated function within a larger mechanical or electrical system, often with <a href='https://en.wikipedia.org/wiki/Real-time_computing'/>real-time computing</a> constraints.<sup><a href='https://en.wikipedia.org/wiki/Embedded_system#cite_note-Barr-glossary-1'/>[1]</a><a href='https://en.wikipedia.org/wiki/Embedded_system#cite_note-2'/>[2]</a></sup> It is <i>embedded</i> as part of a complete device often including hardware and mechanical parts. By contrast, a general-purpose computer, such as a <a href='https://en.wikipedia.org/wiki/Personal_computer'/>personal computer</a> (PC), is designed to be flexible and to meet a wide range of end-user needs. Embedded systems control many devices in common use today. (microcontrollers)</p><p></p><p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_CDSeOdRNfo8_p.150416_1398822863416_20140429_214933.jpg'/></p><p></p><p><a href='http://www.freesoft.org/CIE/Topics/15.htm'/>7 layers of the network</a>:</p><ul><li>Physical Layer (wire, fiber-optics, air)</li>
<li>Data Link Layer (moving electrons!)</li>
<li>Network Link Layer</li>
<li>Transport Layer</li>
<li>Session Layer</li>
<li>Presentation Layer</li>
<li>Application Layer</li></ul>
<p><img src='http://www.freesoft.org/CIE/Topics/model.gif'/></p><p></p><p>Protocols! - agreed-upon interfaces to connect between different nodes</p><ul><li>TCPIP</li>
<li>Websockets</li>
<li>DNS (Domain Name System, aka phone book)</li></ul>

<p>Topologies (very physical concept -&gt; where the internet comes from):</p><ul><li>wifi router</li>
<li>somewhere else in the room</li>
<li>60 Hudson st (tribeca)</li>
<li><img src='http://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/60_Hudson_Street.jpg/450px-60_Hudson_Street.jpg'/></li><ul class="comment"><li>a 1 bedroom 1 bath costs 1.7 million here @ 55 hudson, lowest latency internet :-p wrong address!</li></ul>
</ul>
<ul><li>California</li>
<li>Excellent documentary on where is the physical internet in NYC. By Ben Mendelsohn and Alex Chohlas-Wood - <a href="https://vimeo.com/30642376#at=0"></a>https://vimeo.com/30642376#at=0</li>
<li>(I&rsquo;ve head this is good: <a href="http://www.amazon.com/Tubes-A-Journey-Center-Internet/dp/0061994952)"></a>http://www.amazon.com/Tubes-A-Journey-Center-Internet/dp/0061994952)</li></ul>

<p>Regular internet looks like:</p><p></p><p><img src='http://www.boxysean.com/media/images/clocktower-lan/web/current_internet.gif'/></p><p></p><p><b>MESH NETWORKS</b></p><p><img src='http://0.tqn.com/d/compnetworking/1/0/-/a/topology_mesh.gif'/></p><p></p><p>A mesh network is a network topology in which each node (called a mesh node) relays data for the network. All nodes cooperate in the distribution of data in the network. It is an agreed-upon protocol for computers to talk to each other in a self healing way, without a centralized structure or authority to manage connections. (I.e. no 60 Hudson st)</p><p></p><p>Meshes are self assembling networks, or <b>self healing</b> networks.&nbsp; If a node goes down, the network will find a new path to connect nodes.&nbsp;</p><p></p><p><img src='http://www.johnhenryshammer.com/WOW2/willWebPics/network/selfHealingMesh.jpg'/></p><p></p><p>Centralized (star topology) - DNS (can also run on a decentralized network), HTTP, broadcast radio, twitter (through a single server), roads</p><p>De-centralized - runs peer-to-peer on each person&rsquo;s computer - Bit Torrent</p><p></p><p>Metaphor: the ring road might be faster even if it&rsquo;s not as direct.</p><p></p><p>There are a number of very large mesh networking the world, not very well publicized. All in Europe - example:</p><p><img src='http://img.xatakaon.com/2010/11/guifi.jpg'/></p><p></p><p><a href='https://guifi.net/'/>Guifi</a> - this network in barcelona is made possible by rooftop broadcasting antenas.</p><p>see how star based it still is? sorta centralized.</p><p></p><p>Mesh is such a sexy topic. It just sounds etherial and like something you want to do, right? But the biggest mesh networks are politically motivated (less sexy?). Folks in teh Catalan only had dialup, they wanted broadband. So they did mesh to spread teh broadband. Germany had lots of infrastructure mismanaged during iron curtain. Tech savvy folks leapfrogged this by connecting by mesh.&nbsp;</p><p></p><p><a href='https://www.kickstarter.com/projects/1776324009/brck-your-backup-generator-for-the-internet'/>Ushahidi BRCK</a> - backup generator for the internet</p><p></p><p><img src='http://ushahidi.com/wp-content/uploads/2014/03/promo-brck.jpg'/></p><p></p><p></p><p>Ubiqiti router - you can upload an operating system based around mesh networking on it.</p><p>(yes, he&rsquo;s doing this all off the cuff)</p><p></p><p><a href='http://www.ubnt.com/airmax'/>airMaX Ubiquiti</a></p><p></p><p>bidirectional link needs strong signal in both directions.&nbsp;</p><p></p><p>Let&rsquo;s talk about Occupy.</p><p></p><p>This is Isaac:</p><ul class="comment"><li>:) <a href='/ep/profile/m8dzCUlHBtY'/>lee t</a> link to the documentary!</li></ul>
<p><img src='http://assets.vice.com/content-images/contentimage/142369/occupy.jpg'/></p><p>He made a mesh network for Occupy.</p><p>Clear routers - 3g routers for cell network, makes hotspot,&nbsp;</p><p><a href='http://betabeat.com/2012/03/36466/'/>Free The Network</a></p><p><img src='http://nyobetabeat.files.wordpress.com/2012/03/freedom-tower.jpg?w=300&amp;h=225'/></p><p></p><p><b>MAKING A MESH</b></p><p></p><ol><li>Check what you have on the router already. written on underside. - in our case TP-Link TL-MR3020</li>
<li>look for this name on <a href='http://wiki.openwrt.org/toh/tp-link/tl-mr3020'/>openWRT</a></li>
<li>Go into System Preferences and then open Network. Check your IP address</li>
<li>Open your Network Utility app (find in the search) and click Netstat and run.</li>
<li>Open terminal and enter nmap -sP 192.168.1.0/24 (brew install nmap, if you get a command error)</li>
<li>call <a href='http://motherboard.vice.com/read/two-years-later-where-is-occupys-internet'/>Dan</a> on the phone to ask him for passwords/how to reset</li>
<li>In this photo, Dan is on speaker phone. (oh hai —Dan)</li></ol>

<p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_CDSeOdRNfo8_p.150416_1398825010430_20140429_223215.jpg'/></p><p></p><p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_CDSeOdRNfo8_p.150416_1398952586974_20140430_150716.jpg'/></p><p></p><p>Just poke the recessed reset button 10 seconds *after* you first apply&nbsp; power and hold it down for a couple seconds. The light should start&nbsp; flashing super fast. Then you should be able to telnet in to 192.168.1.1&nbsp; using Ethernet.</p><p></p><p>More on failsafe mode here:</p><p><a href="http://wiki.openwrt.org/toh/tp-link/tl-wr703n#failsafe.mode"></a><a href='http://wiki.openwrt.org/toh/tp-link/tl-wr703n#failsafe.mode'/>http://wiki.openwrt.org/toh/tp-link/tl-wr703n#failsafe.mode</a></p><p></p><p>Now you need to get that file onto the router. The easiest way is just to put it on a usb drive, and then plug it in.</p><p></p><p>`mtd write -r /usb/openwrt-ar71xx-generic-tl-mr3020-v1-squashfs-factory.bin firmware`</p><p></p><p>telnet lets you connect to anything that has a tcp/ip access</p><p></p><p><a href='http://www.stlinux.com/howto/Flash/MTD'/>mtd</a> - <a href='https://en.wikipedia.org/wiki/Memory_Technology_Device'/>Memory Technology Device</a></p><p>A <b>Memory Technology Device</b> (MTD) is a type of <a href='https://en.wikipedia.org/wiki/Device_file_system#Devices'/>device file</a> in <a href='https://en.wikipedia.org/wiki/Linux'/>Linux</a> for interacting with <a href='https://en.wikipedia.org/wiki/Flash_memory'/>flash memory</a>. The MTD subsystem was created to provide an <a href='https://en.wikipedia.org/wiki/Abstraction_layer'/>abstraction layer</a> between the hardware-specific device drivers and higher-level applications. Although character and block device files already existed, their semantics don&rsquo;t map well to the way that flash memory devices operate.</p><p></p><p></p><p>really? the os is called Attitude Adjustment?</p><ul class="comment"><li>&nbsp;the old version was called white russian...</li></ul>

<p>download squash-factory version of openwrt for your router</p><p></p><p>scp = copy over ssh,,,</p><p>mtd = instead of accessing harddrive &gt; ram instead</p><p>have to use so you can flash into firmware</p><p></p><p>If telnet doesn&rsquo;t work, go into failsafe mode.&nbsp;</p><p></p><p></p><p></p><p>way we pass file to router</p><ul><li>npm install -g serve (on laptop)</li>
<li>run serve at the folder with file (on laptop)</li>
<li>(on router) wget <a href="http://192.168.1.2:3000/filename"></a>http://192.168.1.2:3000/filename</li>
<li>cd tmp (to see file there)</li></ul>

<p>ida&rsquo;s password: willcodeforgin</p><p>success:</p><p><img src='https://hackpad-attachments.s3.amazonaws.com/hackpad.com_CDSeOdRNfo8_p.150416_1398829267739_Screen Shot 2014-04-29 at 11.35.19 PM.png'/></p><p></p><p></p><p></p><p>BATMAN</p><p>COMMOTION <a href="http://commotionwireless.net/"></a>http://commotionwireless.net/</p><p>olsr</p><p></p><p>Address Space Collision!</p><p></p><p>Other resources (via Sean):</p><p></p><p>Slovenia mesh has a great setup page: &lt;<a href="https://grow.wlan-si.net/wiki/Navodila/Kratka/English"></a><a href='https://grow.wlan-si.net/wiki/Navodila/Kratka/English'/>https://grow.wlan-si.net/wiki/Navodila/Kratka/English</a>&gt;</p><p></p><p>Biggest mesh in the world map: &lt;<a href="http://guifi.net/en/node/2413/view/map"></a><a href='http://guifi.net/en/node/2413/view/map'/>http://guifi.net/en/node/2413/view/map</a>&gt;&nbsp; They actually have started installing fiber onto their network to get&nbsp; super fast broadband.&nbsp; AND actually their network is no longer a &quot;mesh&quot;,&nbsp; it was originally using mesh protocols so that they could quickly grow&nbsp; their network. Now it&rsquo;s top-down managed, i.e., there&rsquo;s a central&nbsp; authority that manages the links. Mesh becomes unmanagable and does not&nbsp; scale well when it gets past a few hundred nodes.</p><p></p><p>Not necessarily a mesh network, but I am really fascinated with packet radio -- it&rsquo;s a kind of low tech mesh system through radio: <a href="http://en.wikipedia.org/wiki/Automatic_Packet_Reporting_System"></a>http://en.wikipedia.org/wiki/Automatic_Packet_Reporting_System</p><p><a href="http://www.aprs.org/"></a>http://www.aprs.org/</p><p>here you can see objects sending message mapped to google maps:&nbsp;</p><p><a href="http://aprs.fi/#"></a>http://aprs.fi/#!lat=38.00000&amp;lng=-97.00000</p><p></p></body>
</html>
